<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Eigo Adventure â€“ January Week 1</title>
<meta name="theme-color" content="#0b1530" />
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Noto+Sans+JP:wght@700&display=swap" rel="stylesheet" />
<style>
:root{
  --bg:#0b1530;--ink:#fff;--gold1:#fdd86d;--gold2:#ffb347;--outline:#ffffff26;
  --radius:24px;--goldGlow:0 0 8px #facc15,0 0 20px #fde68a;
  --greenGlow:0 0 10px #4ade80,0 0 20px #22c55e;
  --redGlow:0 0 10px #f87171,0 0 20px #ef4444;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:'Noto Sans JP',sans-serif;background:var(--bg);color:var(--ink);
  min-height:100vh;display:flex;flex-direction:column;align-items:center;overflow:hidden;
}
header{text-align:center;padding:1.3rem 0 1rem;font-family:'Cinzel',serif;}
header h1{font-size:clamp(1.4rem,4vw,2.2rem);letter-spacing:2px;text-shadow:0 0 10px rgba(255,255,255,.5);}
header h2{font-size:clamp(1rem,3vw,1.3rem);color:var(--gold1);text-shadow:var(--goldGlow);}
main{flex:1;display:flex;flex-direction:column;align-items:center;width:100%;max-width:700px;text-align:center;padding:0 1rem;}
.sageWrapper{position:relative;width:100%;display:flex;align-items:center;justify-content:center;margin-top:1.5rem;}
#sageBox{
  width:100%;min-height:150px;border-radius:var(--radius);overflow:hidden;position:relative;
  font-size:clamp(1.4rem,5vw,2rem);font-weight:900;display:flex;align-items:center;justify-content:center;text-align:center;
}
#sageBox::before{
  content:'';position:absolute;inset:0;z-index:0;animation:stripeMove 8s linear infinite;background-size:100% 300%;
  background:repeating-linear-gradient(to bottom,#ffd6ff,#caffbf,#9bf6ff,#a0c4ff,#ffadad);
}
@keyframes stripeMove{0%{background-position:0 0;}100%{background-position:0 100%;}}
#sageText{position:relative;z-index:1;color:#fff;padding:0 1rem;font-weight:700;text-shadow:0 0 8px #000,0 0 16px #000;}

.playBtn{
  margin-right:0.8rem;width:60px;height:60px;border-radius:50%;
  background:linear-gradient(135deg,var(--gold1),var(--gold2));
  box-shadow:0 0 12px rgba(255,255,255,.5),0 0 24px rgba(255,255,255,.3);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;animation:shimmer 2s infinite;
}
.playBtn::after{content:"â–¶";color:#000;font-size:1.4rem;font-weight:900;}
@keyframes shimmer{0%,100%{box-shadow:0 0 10px #fff,0 0 20px #fff;}50%{box-shadow:0 0 20px #ffe27a,0 0 40px #ffd700;}}

.studentWrapper{position:relative;width:100%;margin-top:1.5rem;}
#studentBox{
  width:100%;min-height:90px;background:#fff;border-radius:var(--radius);margin-bottom:1.4rem;
  box-shadow:inset 0 0 20px rgba(0,0,0,.15);color:#000;font-size:1.3rem;
  display:flex;align-items:center;justify-content:center;padding:0.5rem 2.5rem;transition:background .4s;
}
.micBtn{
  position:absolute;right:50px;top:50%;transform:translateY(-50%);
  width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,#b388ff,#9d4edd);
  display:flex;align-items:center;justify-content:center;cursor:pointer;
}
.micBtn::after{content:"ðŸŽ¤";font-size:1.3rem;}
.micBtn.active{animation:micGlow 1s infinite alternate;}
@keyframes micGlow{from{box-shadow:0 0 10px #c084fc;}to{box-shadow:0 0 20px #e879f9;}}

#micStatus{position:absolute;right:-25px;top:50%;transform:translateY(-50%);font-weight:700;font-size:0.9rem;}
#micStatus.on{color:#22c55e;text-shadow:var(--greenGlow);}
#micStatus.off{color:#f87171;text-shadow:var(--redGlow);}

.option{border:2px solid var(--outline);border-radius:var(--radius);padding:1rem;margin:0.5rem 0;width:100%;
font-size:clamp(1.1rem,4vw,1.4rem);font-weight:700;opacity:0.9;}

#pointsContainer{position:fixed;bottom:1rem;right:1rem;display:flex;flex-direction:column;align-items:center;gap:0.3rem;}
#pointsLabel{color:var(--gold1);font-family:'Cinzel',serif;font-size:1rem;text-shadow:var(--goldGlow);}
#pointsCircle{
  width:70px;height:70px;border-radius:50%;background:linear-gradient(135deg,var(--gold1),var(--gold2));
  display:flex;align-items:center;justify-content:center;color:#000;font-family:'Cinzel',serif;
  font-size:1.4rem;font-weight:900;box-shadow:var(--goldGlow);transition:transform .3s;
}
#counter{position:fixed;bottom:1rem;left:50%;transform:translateX(-50%);font-family:'Cinzel',serif;color:#fff;font-size:1rem;}
footer{text-align:center;color:#fff;padding:1rem 0;font-family:'Cinzel',serif;font-size:0.9rem;letter-spacing:1px;text-shadow:0 0 6px rgba(255,255,255,.4);}
</style>
</head>
<body>
<header>
  <h1>THE BOO-RICULUM</h1>
  <h2>Eigo Adventure â€“ January Week 1</h2>
</header>

<div id="pointsContainer">
  <div id="pointsLabel">Points</div>
  <div id="pointsCircle">0</div>
</div>

<main>
  <div class="sageWrapper">
    <div class="playBtn" id="playBtn"></div>
    <div id="sageBox"><div id="sageText"></div></div>
  </div>

  <div class="studentWrapper">
    <div id="studentBox"></div>
    <div class="micBtn" id="micBtn"></div>
    <div id="micStatus" class="off">OFF</div>
  </div>

  <div id="options">
    <div class="option"></div>
    <div class="option"></div>
    <div class="option"></div>
    <div class="option"></div>
  </div>
</main>

<div id="counter">1 / 15</div>
<footer>Bryanâ€™s English School</footer>

<script>
const questions=[
{q:"What do you eat for breakfast?",a:0,audio:[
"i_eat_rice_and_miso_soup_for_breakfast.mp3",
"i_eat_curry_for_breakfast.mp3",
"i_eat_toothpaste_for_breakfast.mp3",
"i_eat_pencils_and_notebooks_for_breakfast.mp3"]},
{q:"What time do you eat breakfast?",a:0,audio:[
"i_eat_breakfast_at_seven_o'clock_every_morning.mp3",
"i_eat_breakfast_at_midnight_because_i'm_a_vampire.mp3",
"i_eat_breakfast_inside_the_refrigerator.mp3",
"i_eat_breakfast_at_six_thirty_before_school.mp3"]},
{q:"What do you eat for lunch?",a:0,audio:[
"i_eat_curry_rice_for_lunch_at_school.mp3",
"i_eat_ice_cream_for_lunch_at_school.mp3",
"i_eat_paper_for_lunch_at_school.mp3",
"i_eat_pizza_with_chopsticks_for_lunch.mp3"]},
{q:"What do you do on your birthday?",a:0,audio:[
"i_eat_cake_with_my_family_on_my_birthday.mp3",
"i_eat_my_homework_on_sunday_afternoon.mp3",
"i_invite_my_dog_to_a_party_on_my_birthday.mp3",
"i_open_presents_underwater_on_my_birthday.mp3"]},
];

const correctAudios=['yes_good_job.mp3','perfect_english.mp3','wow_nice_work.mp3'];
const wrongAudios=['hmm_try_again.mp3','what_language_was_that.mp3','do_you_have_a_cookie_in_your_mouth.mp3'];

let current=0,points=0;
let recog,listening=false;
const sageText=document.getElementById('sageText');
const studentBox=document.getElementById('studentBox');
const playBtn=document.getElementById('playBtn');
const micBtn=document.getElementById('micBtn');
const micStatus=document.getElementById('micStatus');
const options=document.querySelectorAll('.option');
const pointsCircle=document.getElementById('pointsCircle');
const counter=document.getElementById('counter');

function playAudio(file){return new Promise(res=>{const a=new Audio('audio/'+file);a.onended=res;a.onerror=res;a.play().catch(res);});}
function pulsePoints(){pointsCircle.style.transform='scale(1.3)';setTimeout(()=>pointsCircle.style.transform='scale(1)',300);}
function updateUI(){pointsCircle.textContent=points;counter.textContent=(current+1)+' / '+questions.length;}
function initRecog(){
  const R=window.SpeechRecognition||window.webkitSpeechRecognition;
  if(!R)return alert('Speech Recognition not supported');
  recog=new R();recog.lang='en-US';recog.interimResults=true;
  recog.onstart=()=>{micBtn.classList.add('active');micStatus.textContent='ON';micStatus.className='on';studentBox.textContent='';listening=true;};
  recog.onend=()=>{micBtn.classList.remove('active');micStatus.textContent='OFF';micStatus.className='off';listening=false;};
  recog.onresult=e=>{
    const transcript=Array.from(e.results).map(r=>r[0].transcript).join('').toLowerCase();
    studentBox.textContent=transcript;
    checkSpeech(transcript);
  };
}
function startMic(){if(!recog)initRecog();if(!listening)recog.start();}
async function checkSpeech(t){
  const q=questions[current];
  const foundIndex=q.audio.findIndex(o=>t.includes(o.split('.mp3')[0].replace(/_/g,' ').toLowerCase()));
  if(foundIndex===q.a){
    points++;pulsePoints();await playAudio(correctAudios[Math.floor(Math.random()*correctAudios.length)]);
    nextQuestion();
  }else if(foundIndex>=0){
    await playAudio(wrongAudios[Math.floor(Math.random()*wrongAudios.length)]);
    studentBox.style.background='#fca5a5';setTimeout(()=>studentBox.style.background='#fff',700);
  }
  updateUI();
}
function loadQuestion(){
  const q=questions[current];
  sageText.textContent=q.q;
  q.audio.forEach((f,i)=>options[i].textContent=f.replace(/_/g,' ').replace('.mp3',''));
  studentBox.textContent='';updateUI();
}
async function playSageSet(){
  const q=questions[current];
  for(const f of q.audio){await playAudio(f);}
  setTimeout(startMic,800);
}
function nextQuestion(){current++;if(current>=questions.length)current=0;loadQuestion();}

playBtn.onclick=()=>{playSageSet();};
micBtn.onclick=()=>{if(!recog)initRecog();if(listening)recog.stop();else startMic();};

loadQuestion();
</script>
</body>
</html>
